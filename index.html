<!-- ...上方代码保持不变... -->
<div id="post-list"></div>
<div id="pagination"></div>
<div id="close-pagination" style="display:none; text-align:center; margin-bottom:30px;">
  <button onclick="closePagination()" style="background:#3e63dd; color:#fff; border:none; border-radius:10px; padding:9px 28px; font-size:1.07rem; font-weight:600; cursor:pointer; box-shadow:0 2px 10px rgba(62,99,221,0.09); transition:background 0.2s;">关闭分页</button>
</div>
<div id="error"></div>
<div class="footer">
  © 2025 forestbird |
  <a href="rss.xml" target="_blank" style="color:#3e63dd;font-weight:600;">RSS订阅</a>
  | Powered by GitHub Pages
</div>
<script>
  // ...你的分页JS逻辑...

  // 修改 renderPagination，显示关闭按钮
  function renderPagination(total, current, onPage) {
    if (total <= 1) { 
      paginationDiv.innerHTML = ''; 
      document.getElementById('close-pagination').style.display = 'none';
      return;
    }
    let html = '';
    for (let i = 1; i <= total; i++) {
      html += `<button class="page-btn${i===current?' active':''}" data-page="${i}">${i}</button>`;
    }
    paginationDiv.innerHTML = `<div class="pagination">${html}</div>`;
    document.querySelectorAll('.page-btn').forEach(btn => {
      btn.onclick = () => { if (btn.classList.contains('active')) return; onPage(Number(btn.dataset.page)); }
    });
    document.getElementById('close-pagination').style.display = '';
  }

  // 关闭分页按钮点击事件
  function closePagination() {
    // 展示全部文章，不分页
    if(window.allPostsForClosePagination) {
      postList.innerHTML = '';
      window.allPostsForClosePagination.forEach(post => {
        const a = document.createElement('a');
        a.className = "card";
        const md_url = post.url
          ? post.url
          : `https://raw.githubusercontent.com/forestbird/forestbird.github.io/main/_posts/${encodeURIComponent(post.filename)}`;
        a.href = `md_viewer.html?url=${encodeURIComponent(md_url)}&title=${encodeURIComponent(post.title)}`;
        a.target = '_blank';
        const titleEl = document.createElement('div');
        titleEl.className = 'title';
        titleEl.textContent = post.title;
        const metaEl = document.createElement('div');
        metaEl.className = 'meta';
        if (post.date) metaEl.innerHTML += `<strong>日期</strong> ${post.date}`;
        if (post.author) metaEl.innerHTML += `<strong>作者</strong> ${post.author}`;
        if (post.categories && post.categories.length) {
          let cats = Array.isArray(post.categories) ? post.categories : [post.categories];
          metaEl.innerHTML += `<strong>分类</strong> <span class="categories">${cats.map(cat => `<span class="category">${cat}</span>`).join('')}</span>`;
        }
        if (post.tags && post.tags.length) {
          let tags = Array.isArray(post.tags) ? post.tags : [post.tags];
          metaEl.innerHTML += `<strong>标签</strong> <span class="tags">${tags.map(tag => `<span class="tag">${tag}</span>`).join('')}</span>`;
        }
        a.appendChild(titleEl);
        a.appendChild(metaEl);
        postList.appendChild(a);
      });
      paginationDiv.innerHTML = '';
      document.getElementById('close-pagination').style.display = 'none';
    }
  }

  // 在 renderPosts 里存全部文章，便于关闭分页时用
  function renderPosts(posts, page = 1) {
    window.allPostsForClosePagination = posts;
    const totalPages = Math.ceil(posts.length / POSTS_PER_PAGE);
    const start = (page - 1) * POSTS_PER_PAGE;
    const currentPosts = posts.slice(start, start + POSTS_PER_PAGE);
    postList.innerHTML = '';
    if (currentPosts.length === 0) {
      postList.textContent = '没有文章。';
      paginationDiv.innerHTML = '';
      document.getElementById('close-pagination').style.display = 'none';
      return;
    }
    currentPosts.forEach(post => {
      const a = document.createElement('a');
      a.className = "card";
      const md_url = post.url
        ? post.url
        : `https://raw.githubusercontent.com/forestbird/forestbird.github.io/main/_posts/${encodeURIComponent(post.filename)}`;
      a.href = `md_viewer.html?url=${encodeURIComponent(md_url)}&title=${encodeURIComponent(post.title)}`;
      a.target = '_blank';
      const titleEl = document.createElement('div');
      titleEl.className = 'title';
      titleEl.textContent = post.title;
      const metaEl = document.createElement('div');
      metaEl.className = 'meta';
      if (post.date) metaEl.innerHTML += `<strong>日期</strong> ${post.date}`;
      if (post.author) metaEl.innerHTML += `<strong>作者</strong> ${post.author}`;
      if (post.categories && post.categories.length) {
        let cats = Array.isArray(post.categories) ? post.categories : [post.categories];
        metaEl.innerHTML += `<strong>分类</strong> <span class="categories">${cats.map(cat => `<span class="category">${cat}</span>`).join('')}</span>`;
      }
      if (post.tags && post.tags.length) {
        let tags = Array.isArray(post.tags) ? post.tags : [post.tags];
        metaEl.innerHTML += `<strong>标签</strong> <span class="tags">${tags.map(tag => `<span class="tag">${tag}</span>`).join('')}</span>`;
      }
      a.appendChild(titleEl);
      a.appendChild(metaEl);
      postList.appendChild(a);
    });
    renderPagination(totalPages, page, p => renderPosts(posts, p));
  }
  // ...其余JS逻辑保持不变...
</script>
