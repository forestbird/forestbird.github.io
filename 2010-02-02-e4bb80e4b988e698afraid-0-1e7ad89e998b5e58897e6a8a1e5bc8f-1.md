---
id: 402
title: '什么是RAID 0、1等阵列模式'
date: '2010-02-02T13:26:18+08:00'
author: forestbird
layout: post
guid: 'https://bird.work/?p=402'
permalink: /2010/02/02/%e4%bb%80%e4%b9%88%e6%98%afraid-0-1%e7%ad%89%e9%98%b5%e5%88%97%e6%a8%a1%e5%bc%8f-1/
categories:
    - log
tags:
    - '0'
    - '1'
    - RAID
    - 模式
    - 阵列
---

RAID是英文Redundant Array of Inexpensive Disks的缩写，中文简称为廉价磁盘冗余阵列。RAID就是一种由多块硬盘构成的冗余阵列。虽然RAID包含多块硬盘，但是在操作系统下是作为一个独立的大型存储设备出现。利用RAID技术于存储系统的好处主要有以下三种：

通过把多个磁盘组织在一起作为一个逻辑卷提供磁盘跨越功能   
通过把数据分成多个数据块（Block）并行写入/读出多个磁盘以提高访问磁盘的速度   
通过镜像或校验操作提供容错能力   
最初开发RAID的主要目的是节省成本，当时几块小容量硬盘的价格总和要低于大容量的硬盘。目前来看RAID在节省成本方面的作用并不明显，但是RAID可以充分发挥出多块硬盘的优势，实现远远超出任何一块单独硬盘的速度和吞吐量。除了性能上的提高之外，RAID还可以提供良好的容错能力，在任何一块硬盘出现问题的情况下都可以继续工作，不会受到损坏硬盘的影响。

RAID技术分为几种不同的等级，分别可以提供不同的速度，安全性和性价比。根据实际情况选择适当的RAID级别可以满足用户对存储系统可用性、性能和容量的要求。常用的RAID级别有以下几种：NRAID，JBOD，RAID0，RAID1，RAID0+1，RAID3，RAID5等。目前经常使用的是RAID5和RAID（0+1）。

NRAID   
NRAID即Non-RAID，所有磁盘的容量组合成一个逻辑盘，没有数据块分条（no block stripping）。NRAID不提供数据冗余。要求至少一个磁盘。

JBOD   
JBOD代表Just a Bunch of Drives，磁盘控制器把每个物理磁盘看作独立的磁盘，因此每个磁盘都是独立的逻辑盘。JBOD也不提供数据冗余。要求至少一个磁盘。

RAID 0   
RAID 0即Data Stripping（数据分条技术）。整个逻辑盘的数据是被分条（stripped）分布在多个物理磁盘上，可以并行读/写，提供最快的速度，但没有冗余能力。要求至少两个磁盘。我们通过RAID 0可以获得更大的单个逻辑盘的容量，且通过对多个磁盘的同时读取获得更高的存取速度。RAID 0首先考虑的是磁盘的速度和容量，忽略了安全，只要其中一个磁盘出了问题，那么整个阵列的数据都会不保了。

RAID 1   
RAID 1，又称镜像方式，也就是数据的冗余。在整个镜像过程中，只有一半的磁盘容量是有效的（另一半磁盘容量用来存放同样的数据）。同RAID 0相比，RAID 1首先考虑的是安全性，容量减半、速度不变。

RAID 0+1   
为了达到既高速又安全，出现了RAID 10（或者叫RAID 0+1），可以把RAID 10简单地理解成由多个磁盘组成的RAID 0阵列再进行镜像。

RAID 3和RAID 5   
RAID 3和RAID 5都是校验方式。RAID 3的工作方式是用一块磁盘存放校验数据。由于任何数据的改变都要修改相应的数据校验信息，存放数据的磁盘有好几个且并行工作，而存放校验数据的磁盘只有一个，这就带来了校验数据存放时的瓶颈。RAID 5的工作方式是将各个磁盘生成的数据校验切成块，分别存放到组成阵列的各个磁盘中去，这样就缓解了校验数据存放时所产生的瓶颈问题，但是分割数据及控制存放都要付出速度上的代价。

按照硬盘接口的不同，RAID分为SCSI RAID，IDE RAID和SATA RAID。其中，SCSI RAID主要用于要求高性能和高可靠性的服务器/工作站，而台式机中主要采用IDE RAID和SATA RAID。

以前RAID功能主要依靠在主板上插接RAID控制卡实现，而现在越来越多的主板都添加了板载RAID芯片直接实现RAID功能，目前主流的RAID芯片有HighPoint的HTP372和Promise的PDC20265R，而英特尔更进一步，直接在主板芯片组中支持RAID，其ICH5R南桥芯片中就内置了SATA RAID功能，这也代表着未来板载RAID的发展方向—芯片组集成RAID。

Matrix RAID：   
Matrix RAID即所谓的“矩阵RAID”，是ICH6R南桥所支持的一种廉价的磁盘冗余技术，是一种经济性高的新颖RAID解决方案。Matrix RAID技术的原理相当简单，只需要两块硬盘就能实现了RAID 0和RAID 1磁盘阵列，并且不需要添加额外的RAID控制器，这正是我们普通用户所期望的。Matrix RAID需要硬件层和软件层同时支持才能实现，硬件方面目前就是ICH6R南桥以及更高阶的ICH6RW南桥，而Intel Application Acclerator软件和Windows操作系统均对软件层提供了支持。

Matrix RAID的原理就是将每个硬盘容量各分成两部分(即：将一个硬盘虚拟成两个子硬盘，这时子硬盘总数为4个)，其中用两个虚拟子硬盘来创建RAID0模式以提高效能，而其它两个虚拟子硬盘则透过镜像备份组成RAID 1用来备份数据。在Matrix RAID模式中数据存储模式如下：两个磁盘驱动器的第一部分被用来创建RAID 0阵列，主要用来存储操作系统、应用程序和交换文件，这是因为磁盘开始的区域拥有较高的存取速度，Matrix RAID将RAID 0逻辑分割区置于硬盘前端(外圈)的主因，是可以让需要效能的模块得到最好的效能表现；而两个磁盘驱动器的第二部分用来创建RAID1模式，主要用来存储用户个人的文件和数据。

例如，使用两块120GB的硬盘，可以将两块硬盘的前60GB组成120GB的逻辑分割区，然后剩下两个60GB区块组成一个60GB的数据备份分割区。像需要高效能、却不需要安全性的应用，就可以安装在RAID 0分割区，而需要安全性备分的数据，则可安装在RAID 1分割区。换言之，使用者得到的总硬盘空间是180GB，和传统的RAID 0+1相比，容量使用的效益非常的高，而且在容量配置上有着更高的弹性。如果发生硬盘损毁，RAID 0分割区数据自然无法复原，但是RAID 1分割区的数据却会得到保全。

可以说，利用Matrix RAID技术，我们只需要2个硬盘就可以在获取高效数据存取的同时又能确保数据安全性。这意味着普通用户也可以低成本享受到RAID 0+1应用模式。